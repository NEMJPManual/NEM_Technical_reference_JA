## 不適データのフィルタリング

さまざまな理由で不良なサンプルがある可能性があります。

* 悪意のあるノードが間違ったタイムスタンプを提供する可能性があります。
* 正直なノードは、それと知らずに、かつまだ同期されていない、実時間から遠く離れた時計を持つことがあります。
* ラウンドトリップ時間は、インターネットの問題または
ノードが非常にビジー状態であるため、非常に非対称でありえます。 これはチャネルの非対称として知られており、
回避不可能です。

不良サンプルを削除しようとするフィルタが適用されます。 フィルタリングは3つのステップで行われます。

1. 期待された時間枠（例えば $$t_4-t_1>100mS$$）内にパートナーからの応答が受信されない場合、サンプルは破棄されます。

2. 計算されたオフセットが一定の範囲内にない場合、サンプルは破棄されます。 ノードの稼働時間が増加するにつれて許容範囲が減少します。 ノードが最初にネットワークに参加したとき、既にネットワークに存在する同意されたネットワーク時間に適応するために高いオフセットを許容します。時間が経過すると、ノードは報告されたオフセットに関して、許容範囲が減少していきます。これにより、しばらくすれば、大きなオフセットを報告する悪意のあるノードが無視されます。

3. 残りのサンプルは、オフセットによって並べ替えられ、次に両端でアルファトリムされます。換言すれば、両側で、サンプルの特定の部分が廃棄されます。
（訳注：　アルファトリム：サンプルの両端からそれぞれα％ずつサンプルを除いて求める平均値取得方法）


