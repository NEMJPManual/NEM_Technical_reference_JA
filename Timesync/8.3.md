## 有効なオフセットの計算 

報告されたオフセットには、オフセットを報告するノードのブートアカウントの重要度がウエイトされます。
これは、シビルの攻撃を防ぐために行われます。

そのため、低い重要度をもち、許容範囲に近いオフセットを報告する多くのノードを実行して計算されたオフセットに影響を与えようとする攻撃者は、同じオフセットを報告する同じ累積重要度をもつ単一ノードより大きな影響力を持つことはありません。
攻撃者の影響度はマクロレベルでは単一ノードと同じ影響度を持つでしょう。

また、利用可能なサンプルの数とすべてのパートナーノードの累積重要度は考慮されるべきです。
故に、各オフセットにスケーリング係数が乗算されます。

$$I_j$$を$$j$$番目のオフセット$$o_j$$を報告するノードの重要度、$$viewSize$$を最後のPoIを計算するのに適切であったノードの
数で除算したサンプル数とします。

スケーリング要素は

$$
scale=\min(\frac{1}{\sum_j I_j},\frac{1}{viewSize})
$$

これにより、有効なオフセット$$o$$の式が導出されます。

$$
o=scale \sum_j I_j o_j
$$


<img src="/images/Figure14.png">
<center>図14:結合係数</center>
<br>

$$viewSize$$がスケールの上限を制限するため、重要度の高いアカウントの影響は人為的に制限されていることに注意してください。
そのようなアカウントは、NEMを上限が設定されていないアカウントに分割することにより、マクロレベルでの影響を大きくすることができます。しかし、そうすることで、分割されたすべてのアカウントが単一ノードに時間同期のパートナーとして選ばれる確率は低いため、
おそらく個々のパートナーへの影響は低いでしょう。


